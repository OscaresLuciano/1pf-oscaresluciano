"use strict";(self.webpackChunkPF_OscaresLuciano=self.webpackChunkPF_OscaresLuciano||[]).push([[912],{6912:(rt,A,i)=>{i.r(A),i.d(A,{CursosModule:()=>it});var d=i(6895),y=i(2559),h=i(6582),c=i(4006),m=i(5412),I=i(5226),D=i.n(I),t=i(4650),x=i(4351),C=i(4004),T=i(9646),p=i(6497),N=i(529);let _=(()=>{class e{constructor(o){this.httpClient=o,this.courses=[]}getCourses$(){return this.httpClient.get(`${p.N.baseUrl}/courses`)}createCourse$(o){return this.httpClient.post(`${p.N.baseUrl}/courses`,o).pipe((0,x.b)(()=>this.getCourses$()))}deleteCourses$(o){return this.httpClient.delete(`${p.N.baseUrl}/courses/${o}`).pipe((0,x.b)(()=>this.getCourses$()))}editCourse$(o,s){return this.httpClient.put(`${p.N.baseUrl}/courses/${o}`,s).pipe((0,x.b)(()=>this.getCourses$()))}getCourseById$(o){return this.httpClient.get(`${p.N.baseUrl}/courses/${o}`)}getCursoWithInscripciones$(o){return this.getCourseById$(o).pipe((0,x.b)(s=>s?this.httpClient.get(`${p.N.baseUrl}/enrollments?courseId=${o}&_expand=course&_expand=user`).pipe((0,C.U)(n=>({curso:s,inscripciones:n}))):(0,T.of)({curso:void 0,inscripciones:[]})))}deleteInscripcionCurso$(o){return this.httpClient.delete(`${p.N.baseUrl}/enrollments/${o}`)}static#t=this.\u0275fac=function(s){return new(s||e)(t.LFG(N.eN))};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var v=i(4859),F=i(4144),f=i(9549),g=i(9602),M=i(9228);let $=(()=>{class e{constructor(o,s,n){this.matDialogRef=o,this.cursosService=s,this.courseId=n,this.nameControl=new c.NI("",[c.kI.required,c.kI.minLength(4),c.kI.maxLength(20)]),this.startDateControl=new c.NI("",[c.kI.required]),this.endDateControl=new c.NI("",[c.kI.required]),this.courseForm=new c.cw({name:this.nameControl,startDate:this.startDateControl,endDate:this.endDateControl}),n&&this.cursosService.getCourseById$(n).subscribe({next:a=>{a&&this.courseForm.patchValue(a)}})}get isEditing(){return!!this.courseId}onSubmit(){if(this.courseForm.invalid)return this.courseForm.markAllAsTouched();this.matDialogRef.close(this.courseForm.value),D().fire("",this.isEditing?"Curso editado correctamente!":"Curso agregado correctamente!","success")}static#t=this.\u0275fac=function(s){return new(s||e)(t.Y36(m.so),t.Y36(_),t.Y36(m.WI))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-cursos-modal"]],decls:30,vars:9,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],[1,"row"],[1,"col-12"],[1,"w-100"],["matInput","","type","text",3,"formControl"],["color","accent",1,"w-100"],[3,"formGroup","rangePicker"],["matStartDate","","formControlName","startDate","placeholder","Start date","name","startDate"],["matEndDate","","formControlName","endDate","placeholder","End date","name","endDate"],["matIconSuffix","",3,"for"],["picker",""],["mat-dialog-actions",""],["mat-flat-button","","color","primary",3,"click"],["mat-flat-button","","mat-dialog-close","","color","warn"]],template:function(s,n){if(1&s&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1)(3,"form",2)(4,"div",3)(5,"div",4)(6,"mat-form-field",5)(7,"mat-label"),t._uU(8,"Nombre"),t.qZA(),t._UZ(9,"input",6),t.TgZ(10,"mat-error"),t._uU(11),t.ALo(12,"formErrors"),t.qZA()()(),t.TgZ(13,"div",4)(14,"mat-form-field",7)(15,"mat-label"),t._uU(16,"Ingrese la duraci\xf3n del curso"),t.qZA(),t.TgZ(17,"mat-date-range-input",8),t._UZ(18,"input",9)(19,"input",10),t.qZA(),t.TgZ(20,"mat-hint"),t._uU(21,"MM/DD/YYYY \u2013 MM/DD/YYYY"),t.qZA(),t._UZ(22,"mat-datepicker-toggle",11)(23,"mat-date-range-picker",null,12),t.qZA()()()()(),t.TgZ(25,"div",13)(26,"button",14),t.NdJ("click",function(){return n.onSubmit()}),t._uU(27,"Guardar"),t.qZA(),t.TgZ(28,"button",15),t._uU(29,"Cancelar"),t.qZA()()),2&s){const a=t.MAs(24);let u;t.xp6(1),t.hij(" ",n.isEditing?"Editar curso":"Crear curso","\n"),t.xp6(2),t.Q6J("formGroup",n.courseForm),t.xp6(6),t.Q6J("formControl",n.nameControl),t.xp6(2),t.hij(" ",t.lcZ(12,7,null==(u=n.courseForm.get("name"))?null:u.errors)," "),t.xp6(6),t.Q6J("formGroup",n.courseForm)("rangePicker",a),t.xp6(5),t.Q6J("for",a)}},dependencies:[v.lW,c._Y,c.Fj,c.JJ,c.JL,c.oH,c.sg,c.u,F.Nt,f.KE,f.hX,f.bx,f.TO,f.R9,m.ZT,m.uh,m.xY,m.H8,g.nW,g.wx,g.zY,g.By,g._g,M.w],encapsulation:2})}return e})();var b=i(7392),S=i(5828),Y=i(7569),U=i(9653),l=i(7155);function J(e,r){1&e&&(t.TgZ(0,"th",12),t._uU(1,"ID"),t.qZA())}function w(e,r){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.Oqu(o.id)}}function Q(e,r){1&e&&(t.TgZ(0,"th",12),t._uU(1,"Curso"),t.qZA())}function B(e,r){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.ALo(2,"titlecase"),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,o.name)," ")}}function O(e,r){1&e&&(t.TgZ(0,"th",12),t._uU(1,"Fecha de Inicio"),t.qZA())}function L(e,r){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,o.startDate,"dd/MM/YYYY")," ")}}function E(e,r){1&e&&(t.TgZ(0,"th",12),t._uU(1,"Fecha de Fin"),t.qZA())}function q(e,r){if(1&e&&(t.TgZ(0,"td",13),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const o=r.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,o.endDate,"dd/MM/YYYY")," ")}}function R(e,r){1&e&&(t.TgZ(0,"th",14),t._uU(1,"Acciones"),t.qZA())}function k(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"td",15)(1,"button",16)(2,"mat-icon"),t._uU(3," visibility "),t.qZA()(),t.TgZ(4,"button",17),t.NdJ("click",function(){const a=t.CHM(o).$implicit,u=t.oxw();return t.KtG(u.editCourse.emit(a))}),t.ALo(5,"async"),t.TgZ(6,"mat-icon"),t._uU(7," edit "),t.qZA()(),t.TgZ(8,"button",18),t.NdJ("click",function(){const a=t.CHM(o).$implicit,u=t.oxw();return t.KtG(u.deleteCourse.emit(a.id))}),t.ALo(9,"async"),t.TgZ(10,"mat-icon"),t._uU(11," delete "),t.qZA()()()}if(2&e){const o=r.$implicit,s=t.oxw();t.xp6(1),t.Q6J("routerLink",o.id),t.xp6(3),t.Q6J("disabled","Administrador"!==t.lcZ(5,3,s.usuarioRol$)),t.xp6(4),t.Q6J("disabled","Administrador"!==t.lcZ(9,5,s.usuarioRol$))}}function j(e,r){1&e&&t._UZ(0,"tr",19)}function z(e,r){1&e&&t._UZ(0,"tr",20)}let H=(()=>{class e{constructor(o){this.store=o,this.dataSource=[],this.deleteCourse=new t.vpe,this.editCourse=new t.vpe,this.displayedColumns=["id","name","startDate","endDate","actions"],this.usuarioRol$=this.store.select(Y.r).pipe((0,C.U)(s=>s?.role))}static#t=this.\u0275fac=function(s){return new(s||e)(t.Y36(U.yh))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-cursos-table"]],inputs:{dataSource:"dataSource"},outputs:{deleteCourse:"deleteCourse",editCourse:"editCourse"},decls:18,vars:3,consts:[["mat-table","",1,"mat-elevation-z8","text-center",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","startDate"],["matColumnDef","endDate"],["matColumnDef","actions"],["mat-header-cell","","class","text-center",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-cell","",1,"text-center"],["mat-cell","",1,"text-center"],["mat-icon-button","","color","primary",3,"routerLink"],["mat-icon-button","","color","accent",3,"disabled","click"],["mat-icon-button","","color","warn",3,"disabled","click"],["mat-header-row",""],["mat-row",""]],template:function(s,n){1&s&&(t.TgZ(0,"table",0),t.ynx(1,1),t.YNc(2,J,2,0,"th",2),t.YNc(3,w,2,1,"td",3),t.BQk(),t.ynx(4,4),t.YNc(5,Q,2,0,"th",2),t.YNc(6,B,3,3,"td",3),t.BQk(),t.ynx(7,5),t.YNc(8,O,2,0,"th",2),t.YNc(9,L,3,4,"td",3),t.BQk(),t.ynx(10,6),t.YNc(11,E,2,0,"th",2),t.YNc(12,q,3,4,"td",3),t.BQk(),t.ynx(13,7),t.YNc(14,R,2,0,"th",8),t.YNc(15,k,12,7,"td",9),t.BQk(),t.YNc(16,j,1,0,"tr",10),t.YNc(17,z,1,0,"tr",11),t.qZA()),2&s&&(t.Q6J("dataSource",n.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns))},dependencies:[b.Hw,v.RK,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,h.rH,d.Ov,d.rS,d.uU],encapsulation:2})}return e})();const W=function(){return[]};let G=(()=>{class e{constructor(o,s){this.cursosService=o,this.matDialog=s,this.courses$=this.cursosService.getCourses$()}addCourse(){this.matDialog.open($).afterClosed().subscribe({next:o=>{o&&(this.courses$=this.cursosService.createCourse$(o))}})}onDeleteCourse(o){D().fire({title:"Confirmar eliminaci\xf3n",text:"Est\xe1s seguro de borrar este curso?",icon:"question",showCancelButton:!0,confirmButtonText:"S\xed, eliminar curso",cancelButtonText:"Cancelar"}).then(s=>{s.isConfirmed&&(this.courses$=this.cursosService.deleteCourses$(o))})}onEditCourse(o){this.matDialog.open($,{data:o.id}).afterClosed().subscribe({next:s=>{s&&(this.courses$=this.cursosService.editCourse$(o.id,s))}})}static#t=this.\u0275fac=function(s){return new(s||e)(t.Y36(_),t.Y36(m.uw))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-cursos"]],decls:9,vars:4,consts:[["appTextSize","","fontWeight","500"],[1,"pb-3"],["mat-flat-button","","color","primary",3,"click"],[3,"dataSource","deleteCourse","editCourse"]],template:function(s,n){1&s&&(t.TgZ(0,"h1",0),t._uU(1,"Cursos"),t.qZA(),t.TgZ(2,"div",1)(3,"button",2),t.NdJ("click",function(){return n.addCourse()}),t.TgZ(4,"mat-icon"),t._uU(5,"add"),t.qZA(),t._uU(6,"Crear Curso "),t.qZA()(),t.TgZ(7,"app-cursos-table",3),t.NdJ("deleteCourse",function(u){return n.onDeleteCourse(u)})("editCourse",function(u){return n.onEditCourse(u)}),t.ALo(8,"async"),t.qZA()),2&s&&(t.xp6(7),t.Q6J("dataSource",t.lcZ(8,1,n.courses$)||t.DdM(3,W)))},dependencies:[b.Hw,v.lW,S.Y,H,d.Ov]})}return e})();var P=i(2092),Z=i(3546),K=i(4850);function X(e,r){if(1&e){const o=t.EpF();t.TgZ(0,"li",8)(1,"p",9),t._uU(2),t.qZA(),t.TgZ(3,"p"),t._uU(4),t.qZA(),t.TgZ(5,"mat-card-actions")(6,"button",10),t.NdJ("click",function(){const a=t.CHM(o).$implicit,u=t.oxw(4);return t.KtG(u.eliminarInscripcion(a.id))}),t._uU(7," Eliminar inscripci\xf3n "),t.qZA()(),t._UZ(8,"mat-divider",11),t.qZA()}if(2&e){const o=r.$implicit;t.xp6(2),t.AsE(" - ",null==o.user?null:o.user.name," ",null==o.user?null:o.user.lastName," "),t.xp6(2),t.hij("Email: ",null==o.user?null:o.user.email,"")}}function V(e,r){if(1&e&&(t.ynx(0),t.TgZ(1,"mat-card",3)(2,"mat-card-title"),t._uU(3," Inscritos: "),t.qZA(),t.TgZ(4,"ul",6),t.YNc(5,X,9,3,"li",7),t.qZA()(),t.BQk()),2&e){const o=t.oxw().ngIf;t.xp6(5),t.Q6J("ngForOf",o)}}function tt(e,r){if(1&e&&(t.ynx(0),t.YNc(1,V,6,1,"ng-container",5),t.BQk()),2&e){const o=r.ngIf;t.oxw();const s=t.MAs(16);t.xp6(1),t.Q6J("ngIf",o.length>0)("ngIfElse",s)}}function et(e,r){}function ot(e,r){if(1&e&&(t.TgZ(0,"div")(1,"mat-card",3)(2,"mat-card-header")(3,"mat-card-title")(4,"h2"),t._uU(5),t.qZA()()(),t.TgZ(6,"mat-card-content")(7,"p"),t._uU(8),t.ALo(9,"date"),t.qZA(),t.TgZ(10,"p"),t._uU(11),t.ALo(12,"date"),t.qZA(),t.YNc(13,tt,2,2,"ng-container",2),t.ALo(14,"async"),t.YNc(15,et,0,0,"ng-template",null,4,t.W1O),t.qZA()()()),2&e){const o=r.ngIf,s=t.oxw();t.xp6(5),t.Oqu(o.name),t.xp6(3),t.hij(" Fecha de inicio de curso: ",t.xi3(9,4,o.startDate,"dd/MM/YY")," "),t.xp6(3),t.hij("Fecha de fin de curso: ",t.xi3(12,7,o.endDate,"dd/MM/YY"),""),t.xp6(2),t.Q6J("ngIf",t.lcZ(14,10,s.inscripciones$))}}const st=[{path:"",component:G},{path:":id",component:(()=>{class e{constructor(o,s,n,a){this.activatedRoute=o,this.cursosService=s,this.inscripcionesService=n,this.store=a,this.curso$=(0,T.of)(void 0),this.inscripciones$=(0,T.of)([]),this.usuarioRol$=this.store.select(Y.r).pipe((0,C.U)(u=>u?.role))}ngOnInit(){const o=+this.activatedRoute.snapshot.params.id;this.curso$=this.cursosService.getCursoWithInscripciones$(o).pipe((0,C.U)(s=>s.curso)),this.inscripciones$=this.cursosService.getCursoWithInscripciones$(o).pipe((0,C.U)(s=>s.inscripciones))}eliminarInscripcion(o){o&&this.cursosService.deleteInscripcionCurso$(o).subscribe(()=>{this.inscripciones$=this.cursosService.getCursoWithInscripciones$(+this.activatedRoute.snapshot.params.id).pipe((0,C.U)(n=>n.inscripciones))})}static#t=this.\u0275fac=function(s){return new(s||e)(t.Y36(h.gz),t.Y36(_),t.Y36(P.K),t.Y36(U.yh))};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["app-cursos-detail"]],decls:4,vars:3,consts:[[1,"container","d-flex","align-items-center","justify-content-center"],[1,"col-8"],[4,"ngIf"],[1,"my-custom-card"],["noInscripciones",""],[4,"ngIf","ngIfElse"],[2,"list-style","none"],["class","pt-3",4,"ngFor","ngForOf"],[1,"pt-3"],["fontWeight","bold"],["color","warn",1,"btn","btn-danger","btn-sm",3,"click"],[1,"custom-divider"]],template:function(s,n){1&s&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,ot,17,12,"div",2),t.ALo(3,"async"),t.qZA()()),2&s&&(t.xp6(2),t.Q6J("ngIf",t.lcZ(3,1,n.curso$)))},dependencies:[d.sg,d.O5,Z.a8,Z.hq,Z.dn,Z.dk,Z.n5,K.d,d.Ov,d.uU],styles:[".my-custom-card[_ngcontent-%COMP%]{width:100%;max-width:600px;margin:20px;padding:20px;box-shadow:0 4px 8px #0000001a;border-radius:8px}mat-card-title[_ngcontent-%COMP%]{font-size:24px;font-weight:700}mat-card-content[_ngcontent-%COMP%]{font-size:16px}ul[_ngcontent-%COMP%]{padding:0}li[_ngcontent-%COMP%]{margin-bottom:20px}.custom-divider[_ngcontent-%COMP%]{width:90%;margin:0 auto}"]})}return e})()}];let nt=(()=>{class e{static#t=this.\u0275fac=function(s){return new(s||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[h.Bz.forChild(st),h.Bz]})}return e})(),it=(()=>{class e{static#t=this.\u0275fac=function(s){return new(s||e)};static#e=this.\u0275mod=t.oAB({type:e});static#o=this.\u0275inj=t.cJS({imports:[d.ez,y.m,h.Bz,nt]})}return e})()}}]);